<tool id="backsub" name="BACKSUB" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE">
    <description>
        <Autofluorescence subtraction module for sequential immunofluorescene images.>
    <long_description>
        <Pixel-by-pixel channel subtraction scaled by exposure times, primarily developed for images produced by the COMET platform and to work within the MCMICRO pipeline. Main usecase is autuofluorescence subtraction for multichannel and multicycle images for visualization of images from tissues with high autofluroescence (FFPE), improved segmentation, and quantification (if the previous two usecases aren't necessary, downstream subtraction of autofluorescent signal is encouraged as the script is memory inefficent).>
    <homepage_url><https://github.com/SchapiroLabor/Background_subtraction>
    <macros>
        <import>macros.xml</import>
    </macros>
 
    <expand macro="requirements"/>
    <expand macro="version_cmd"/>

    <command detect_errors="aggressive"><![CDATA[

        @CMD_BEGIN@ 

        --root $root
        --markers $markers
        --output $output
        --markers $marker-output

    ]]></command>

    <inputs>
        <param name="root" type="???" format="ome.tiff" optional="false" label="File path to root image file"/>
        <param name="markers" type="???" format="csv" optional="false" label="File path to required markers.csv file"/>
        <section name="adv" title="Advanced Options" expanded="false"/>
            <param name="pixel-size" type="float" optional="true" label="Pixel size in microns"/>
            <param name="tile-size" type="int" optional="true" label="Tile size for pyramid generation (default 1024)"/>
            <param name="chunk-size" type="int" optional="true" label="Chunk size for dask array (e.g for chunksize 1000, the image will be split into 1000x1000 chunks) (default 5000)"/>
        </section>
    </inputs>

    <outputs>
        <data format="ome.tiff" name="output" from_work_dir="???" label="${tool.name} on ${on_string}: OutputTiff"/>
        <data format="csv" name="marker-output" from_work_dir="???" label="${tool.name} on ${on_string}: OutputMarkers"/>
    </outputs>

    <tests>
        <test>
        </test>
    </tests>
    <help><![CDATA[
--------------------------------------------------------------------------------
BACKSUB: BACKground SUBtraction for multichannel and multicycle images
--------------------------------------------------------------------------------

**MCMICRO's Background autofluorescence subtraction for cyclic imaging data**

**BACKSUB** performs Pixel-by-pixel channel subtraction scaled by exposure times
primarily developed for images produced by the COMET platform and to work within
the MCMICRO pipeline. Main usecase is autuofluorescence subtraction for
multichannel and multicycle images for visualization of images from tissues with
high autofluroescence (FFPE), improved segmentation, and quantification (if the
previous two usecases aren't necessary, downstream subtraction of
autofluorescent signal is encouraged as the script is memory inefficent).

*Visit https://github.com/SchapiroLabor/Background_subtraction/ for the most up-to-date information on BACKSUB.*
    ]]></help>
    <expand macro="citations" />
</tool>
